sources:
  - name: dwh_flight
    schema: demo_src
    description: >
      Демонстрационная схема авиаперевозок PostgreSQL.
      Содержит данные о рейсах, билетах, бронированиях и посадочных талонах.

    tables:

      - name: boarding_passes
        description: >
          Посадочные талоны пассажиров.
          Каждая запись соответствует посадке пассажира на конкретный рейс
          и содержит информацию о месте в самолёте.
        columns:
          - name: ticket_no
            description: Номер билета пассажира
          - name: flight_id
            description: Идентификатор рейса
          - name: boarding_no
            description: Порядковый номер посадки пассажира
          - name: seat_no
            description: Номер места в самолёте

      - name: flights
        description: >
          Рейсы авиакомпании.
          Содержит плановые и фактические данные о вылете и прилёте,
          аэропорты отправления и назначения, а также статус рейса.
        freshness:
          warn_after:
            count: 24
            period: hour
          error_after:
            count: 48
            period: hour
        loaded_at_field: actual_departure

        columns:
          - name: flight_id
            description: Уникальный идентификатор рейса
          - name: flight_no
            description: Номер рейса
          - name: scheduled_departure
            description: Плановое время вылета
          - name: actual_departure
            description: Фактическое время вылета
          - name: departure_airport
            description: Аэропорт отправления
          - name: arrival_airport
            description: Аэропорт назначения
          - name: status
            description: Статус рейса (Scheduled, Departed, Arrived, Cancelled)

      - name: ticket_flights
        description: >
          Связь билетов и рейсов.
          Таблица многие-ко-многим, так как один билет может включать
          несколько рейсов (перелёты с пересадками).
        columns:
          - name: ticket_no
            description: Номер билета
          - name: flight_id
            description: Идентификатор рейса
          - name: fare_conditions
            description: Класс обслуживания (Economy, Comfort, Business)
          - name: amount
            description: Стоимость перелёта по данному рейсу

      - name: tickets
        description: >
          Билеты пассажиров.
          Содержит информацию о пассажирах и их бронированиях.
        columns:
          - name: ticket_no
            description: Уникальный номер билета
          - name: book_ref
            description: Идентификатор бронирования
          - name: passenger_id
            description: Идентификатор пассажира
          - name: passenger_name
            description: Имя пассажира
          - name: contact_data
            description: Контактные данные пассажира (email, телефон)